{% load bag_extras %}

<div class="toast bg-success text-white" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="me-auto">Success</strong>
      <button type="button" class="close" data-dismiss="toast" aria-label="Close">
        <span aria-hidden="true" class="justify-content-end">&times;</span>
      </button>
      
    </div>
  
    <div class="toast-body">
      {{ message }}
  
      {% if request.session.bag %}
        <p><strong>Items in your bag ({{ request.session.bag|length }})</strong></p>
        {% for sku, quantity in request.session.bag.items %}
          {% with product=sku|get_product %}
            {% if product %}
              <div class="d-flex mb-1 align-items-center">
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid me-2" style="width: 50px; height: 50px; object-fit: cover;">
                <div>
                  <p class="mb-0">{{ product.name }}{% if product.size %} ({{ product.size }}){% endif %} x {{ quantity }}</p>
                </div>
              </div>
            {% endif %}
          {% endwith %}
        {% endfor %}
        <p><strong>Total: Â£{{ grand_total }}</strong></p>
      {% endif %}
    </div>
  </div>
  